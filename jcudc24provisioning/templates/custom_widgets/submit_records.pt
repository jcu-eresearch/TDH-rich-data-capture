<!--Template for custom HTML/Javascript to validate the full workflow-->

<div tal:condition="exists:field.schema.records" class="submit_records">
    <div tal:condition="len(field.schema.records) <= 0">
        <p class="error">There are no ReDBox Records.</p>
        <input id="${field.oid}" name="${field.name}" type="hidden" value="field.schema.widget.false_val">
    </div>
    <div tal:condition="len(field.schema.records) > 0">
        <table>
            <thead><th>Dataset Name</th><th>ReDBox URI</th></thead>
            <tr tal:repeat="(name, uri, edit_url, regenerate_url, metadata_exists, valid) field.schema.records">
                <td>${name}</td>
                <td><span tal:condition="not uri"><i>Not created yet</i></span><a tal:condition="uri" href="${uri}">View in ReDBox</a></td>
                <td tal:condition="valid"><a tal:condition="not metadata_exists" href="${edit_url}">Create & Edit</a><a tal:condition="metadata_exists" href="${edit_url}">View/Edit</a></td>
                <td tal:condition="valid and metadata_exists"><a href="${regenerate_url}" title="Regenerate record (all current data will be lost).">Delete modifications</a></td>
            </tr>
        </table>
        <input id="${field.oid}" name="${field.name}" type="hidden" value="field.schema.widget.true_val">
    </div>
</div>
<div tal:condition="not:exists:field.schema.records">
    <p class="error">ReDBox records data hasn't been added to schema in submit view.</p>
    <input id="${field.oid}" name="${field.name}" type="hidden" value="field.schema.widget.false_val">
</div>