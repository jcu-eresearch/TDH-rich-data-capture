<span>
    <p>Click on the dataset you want to view the logs for below.</p>

    <p tal:condition="len(field.schema.datasets) <=0" class="error">There are no datasets configured for this project.</p>
    <div tal:repeat="dataset field.schema.datasets" class="logs_dataset content_container" style="position: relative">
        <h3>${dataset.name}</h3>
        <a href="./dataset_${dataset.id}_logs.txt" style="position: absolute; right: 5px; top: 0;">dataset_${dataset.id}_logs.txt</a>
        <p class="error" tal:condition="hasattr(dataset, 'logs_error')">${dataset.logs_error}</p>
        <div tal:condition="exists:dataset.logs">
            <p tal:condition="len(dataset.logs) <= 0"><i>This dataset has no ingester logs.</i></p>
            <p tal:repeat="log dataset.logs" class="level-${log.level}">${log.timestamp} ${log.message}</p>
        </div>
    </div>

    <script type="text/javascript">
            deform.addCallback(
                    '${field.oid}',
                    function (oid) {
                        $(".logs_dataset p").hide();
                        $('.logs_dataset').addClass('collapsed');
                        $(".logs_dataset").attr("onclick", "$('.logs_dataset').not($(this)).find('p').hide(); $('.logs_dataset').not($(this)).addClass('collapsed');  $(this).find('p').toggle(); $(this).toggleClass('collapsed');")
                    });
    </script>
</span>
