<!--This template is based off mapping_item to conditionally display custom field configuration fields-->

<li class="field${field.error and ' ' + (field.widget.error_class or '')}"
    id="item-${field.oid}"
    tal:omit-tag="field.widget.hidden"
    i18n:domain="deform"
    tal:attributes="title field.schema.default or ''">

    <span class="structural_title_content" style="display:none;"
          tal:condition="field.schema.__dict__.get('placeholder')"
          tal:content="structure field.schema.__dict__.get('placeholder')"></span>

    <!-- mapping_item -->
    <label tal:condition="not (field.widget.hidden or
                             field.widget.category == 'structural')"
           class="desc"
           for="${field.oid}">
        <span class="help_icon" onclick="toggleHelp(this);" tal:condition="field.schema.__dict__.get('help')">?</span>
        ${field.title}<span tal:condition="field.required" class="req" id="req-${field.oid}">*</span>

    </label>


    <div id="help-${field.oid}" tal:condition="field.schema.__dict__.get('help') and not (field.widget.hidden or
                           field.widget.category == 'structural')"
         class="help_text hidden"
         tal:content="structure field.schema.__dict__.get('help')">
    </div>

    <div id="desc-${field.oid}" tal:condition="field.description and not (field.widget.hidden or
                           field.widget.category == 'structural')"
         class="description"
         tal:content="structure field.description">
    </div>

    <span tal:content="structure field.serialize(cstruct, readonly=True)"/>


    <p tal:condition="field.error and not field.widget.hidden and not field.typ.__class__.__name__=='Mapping'"
       tal:define="errstr 'error-%s' % field.oid"
       tal:repeat="msg field.error.messages()"
       tal:attributes="id repeat.msg.index==0 and errstr or
   ('%s-%s' % (errstr, repeat.msg.index))"
       class="${field.widget.error_class}"
       i18n:translate="">${msg}</p>


    <!-- /mapping_item -->
</li>


