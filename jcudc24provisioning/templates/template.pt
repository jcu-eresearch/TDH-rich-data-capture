<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal" xmlns="http://www.w3.org/1999/html" metal:define-macro="layout"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xml.zope.org/namespaces/metal ">
<head>
    <title><span tal:condition="exists: page_title" tal:replace="structure page_title" /> - Research Data Provisioning</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    <meta name="keywords" content="python web application"/>
    <meta name="description" content="pyramid web application"/>
    <link rel="shortcut icon" href="/static/images/favicon.ico"/>
    <!--<link rel="stylesheet" href="${"static/pylons.css" type="text/css" media="screen" charset="utf-8" /> -->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>-->
    <link rel="stylesheet" href="/deform_static/css/form.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/deform_static/css/beautify.css" />
    <link rel="stylesheet" type="text/css" href="/deform_static/css/ui-lightness/jquery-ui-1.8.11.custom.css" />
    <link rel="stylesheet" type="text/css" href="/deform_static/css/jquery.autocomplete.css" />
    <link rel="stylesheet" href="/static/template.css" type="text/css" />
    <link rel="stylesheet" href="/static/website.css" type="text/css" />
    <!--<script type="text/javascript" src="/deform_static/scripts/jquery-1.7.2.min.js"></script>-->
    <!--<script type="text/javascript" src="/deform_static/scripts/jquery-ui-1.8.11.custom.min.js"></script>-->
    <script type="text/javascript" src="/static/scripts/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="/static/scripts/jquery-ui-1.8.23.custom.min.js"></script>
    <script type="text/javascript" src="/deform_static/scripts/deform.js"></script>
    <script type="text/javascript" src="/deform_static/scripts/jquery.form.js"></script>
    <script type="text/javascript" src="/static/scripts/widgets.js"></script>
    <script type="text/javascript" src="/static/openlayers/OpenLayers.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&amp;sensor=false"></script>

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />

    <!--Regex Masks-->
    <script type="text/javascript" src="/static/jquery-regex-mask-plugin-master/regex-mask-plugin.js"></script>

    <!--Cron widget-->
    <script type="text/javascript" src="/static/jquery-cron/gentleSelect/jquery-gentleSelect.js"></script>
    <script type="text/javascript" src="/static/jquery-cron/cron/jquery-cron.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/jquery-cron/gentleSelect/jquery-gentleSelect.css" />
    <link rel="stylesheet" type="text/css" href="/static/jquery-cron/cron/jquery-cron.css"  />

    <!--Uniform form styling-->
    <script type="text/javascript" src="/static/uniform/jquery.uniform.js"></script>
    <link rel="stylesheet" href="/static/uniform/themes/aristo/css/uniform.aristo.css" media="screen" />


    <style type="text/css">
        .select_style {
            border: 1px solid red;
            position: absolute;
            z-index: 0;
        }
    </style>

    <script type="text/javascript">
        $(window).resize(set_content_size);

        function set_content_size() {
//            console.log($("#center").width() - $("#sidebar").width());
            $("#content").width($("#center").width() - $("#sidebar").width() - 15);

            var body = $("body");
            if ($("html").width() <= 1024){
                if (body[0].original_padding === undefined) {
                    body[0].original_padding = body.css("padding-left");
                }
                body.css("padding", "0");
            } else if (body[0].original_padding !== undefined) {
                body.css("padding-left", body[0].original_padding);
                body.css("padding-right", body[0].original_padding);
            }

            var page_height = $("#footer").position().top + $("#footer").height();
            var window_height = window.innerHeight;
            if (page_height < window_height) {
                var new_height = $(window).height() - $("#header").height() - $("#footer").height() - 55; // 55 is to counter padding etc. (trial and error)
                $('#center').height(new_height);
            }
        }

//        $(window).ready(function () {
//            $("input[type=radio], input[type=checkbox]").uniform();
//        });

//        $(window).ready(style_select);
//
//        // Extend the addSequenceItem function to update the looks of all select elements when added.
//        $(function() {
//            deform.oldAddSequenceItem = deform.addSequenceItem;
//            deform.addSequenceItem = function (protonode, before) {
//                var result = deform.oldAddSequenceItem(protonode, before);
//                style_select();
//                return result;
//            };
//        });
//
//        function style_select() {
//            if(typeof document.body.style.maxHeight !== "undefined"){ /* filter out <= IE6 */
//                var select_items = $("select").not(".styled");
//                for (var i=0; i < select_items.length; i++) {
////                    var new_element = '<label class="select_wrapper"></label>';
//                    var onclick = "$(this).prev().change();";
//                    var new_element = '<div class="select_wrappera" onclick=' + onclick + ' >asdf</div>';
////                    alert(new_element);
//                    $(select_items[i]).after($(new_element));
//
//                    $(select_items[i]).addClass('styled');
//                }
//
//                $("select:not(:visible)").next().hide();
//            }
//        }

        /*$(function() {
           $( document ).tooltip({
            track: true
           });
       }); */

        $(function () {
            if ($("#deform").length <= 0 ||$("#deform").attr('readonly') == 'readonly') {
                window.onbeforeunload = null;
            }
        });


        window.onbeforeunload = function (e) {
            var message = "Are you sure you want to leave this page, all unsaved data will be lost.",
            e = e || window.event;

            if (e) {
                e.returnValue = message;
            }
            return message;
        };
        $(function() {
            $("#deform").submit(function(){
                window.onbeforeunload = null;
            });
        });




//        alert($("form").length);



            // For Safari

//            $("select").css('display', function(index, value) {
////                alert($(this).next().css('color'));
//                alert('display value changed: ' +(value));
//                (this).next().css('display', value);
//                alert('color set');
////                $.uniform.update();
//           });

//            select_items.before($(before_html));
//            select_items.onchange(function() {
//                alert('changed');
//            });

    </script>
</head>
<body>
    <script type="text/javascript"></script>

    <div id="wrapper">
        <div id="inner_wrapper">
           <div id="header">
               <div id="logo">
                   <a href="www.jcu.edu.au"><img src="/static/images/jcu_logo.gif" alt="James Cook University logo"/></a>
               </div>

               <div id="top_menu" tal:define="user view.get_user">
                   <div tal:condition="user" id="user_name">Welcome ${user.display_name}!</div>
                   <div id="help_menu">Help &#x25BC;</div>
                   <div tal:condition="not user" id="login"><a href="/login">Log in</a></div>
                   <div tal:condition="user" id="login"><a href="/logout">Log out</a></div>
               </div>

               <div id="search">
                   <form action="/search">
                       <input id="search_input"  type="text" name="search" onblur="if (value=='') {this.value='Search site'; style.color='#999';}" value="Search site" onclick="if (value=='Search site') {value=''; style.color='#000';}" />
                       <button type="submit" class="buttonText submit">Search</button>
                   </form>
               </div>
               <div id="title">
                   <img src="/static/images/tdh_logo.gif" alt="TDH Tropical Data Hub" />
               </div>
               <div id="page_title">
                   <h1><tal:block tal:condition="exists: page_help">
                     <span tal:condition="page_help" class="help_icon"
                           onclick="toggleHelp(this)">?</span></tal:block>
                       <span tal:condition="exists: page_title" tal:replace="structure page_title" />
                   </h1>


                   <tal:block tal:condition="exists: page_help">
                       <div tal:condition="page_help"
                            tal:attributes="class 'help_text page_help_text' + (page_help_hidden and ' hidden' or '')"
                            tal:content="structure page_help"></div>
                   </tal:block>
               </div>


                <div id="nav">
                    <ul>
                       <li tal:repeat="page view.menu">
                           <tal:block tal:condition="page.current">
                               <a class="current" href="${page.href}" tal:content="structure page.title"></a>
                           </tal:block>
                           <tal:block tal:condition="not page.current">
                               <a href="${page.href}" tal:content="structure page.title"></a>
                           </tal:block>
                       </li>
                    </ul>
                    <!--<a href="/">Dashboard</a>-->
                    <!--<a href="/">Browse Projects</a>-->
                    <!--<a href="/">Help</a>-->
                </div>

            </div>

            <div id="center">
                 <div class="messages" tal:condition="exists:messages">
                     <!--Messages panel-->
                     <noscript>
                         <div id="no_javascript">
                             <p>Please enable javascript for full usability.</p>
                         </div>
                     </noscript>

                     <!--[if IE]>
                         <div id="ie_browser" >
                             <p>Internet Explorer isn't supported please use another browser (<a href="http://www.mozilla.org/en-US/firefox/new/">Firefox</a>, <a href="https://www.google.com/intl/en/chrome/browser/">Chrome</a> or <a href="https://www.apple.com/au/safari/">Safari</a>) or you can try the <a href="http://www.google.com/chromeframe?quickenable=true">Chrome frame plugin</a>.</p>
                         </div>
                     <![endif]-->

                     <!--Panel for each type of message-->
                     <tal:block tal:repeat="msg_type messages">
                         <div tal:condition="messages[msg_type]" tal:attributes="class msg_type">
                             <p tal:repeat="msg messages[msg_type]" tal:content="msg"></p>
                         </div>
                     </tal:block>
                 </div>

                <div metal:define-slot="content"></div>
            </div>
            <div id="footer">
                <div id="supported_by">
                    <a id="qcif_logo" href="http://www.qcif.edu.au/"><img src="/static/images/qcif_logo.bmp" alt="the Queensland Cyber Infrastructure Foundation logo" /></a>
                    <a id="ands_logo" href="http://www.ands.org.au/"><img src="/static/images/ands_logo.bmp" alt="Australian National Data Services logo" /></a>
                    <p>This project is Supported by the<a href="http://www.ands.org.au/">Australian National Data Service (ANDS)</a> through the <a href="http://ncris.innovation.gov.au/Pages/default.aspx">National Collaborative Research Infrastructure Strategy</a> Program and the <a href="http://www.innovation.gov.au/HigherEducation/Funding/EducationInvestmentFund/Pages/default.aspx">Education Investment Fund (EIF)</a> <a href="http://www.innovation.gov.au/SCIENCE/RESEARCHINFRASTRUCTURE/Pages/SuperScience.aspx">Super Science Initiative</a>, as well as through the <a href="http://www.qcif.edu.au/">Queensland Cyber Infrastructure Foundation (QCIF)</a></p>
                </div>
                <div id="developed_by">
                    <a href="eresearch.jcu.edu.au"><img style="padding-top: 18px;" src="../../static/images/eresearch-logo-sml.png" alt="eResearch Centre"/></a>
                    <a href="www.bajtech.com.au"><img src="../../static/images/bajtech_logo_bw.png" alt="Bajtech" /></a>
                    <p>Designed and developed by <a href="http://www.bajtech.com.au">Bajtech</a> and <a href="http://eresearch.jcu.edu.au">JCU eResearch Centre</a>.</p>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        deform.load();
        deform.processCallbacks();
        set_content_size();
    </script>
</body>
</html>
